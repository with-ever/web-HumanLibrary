<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.withever.humanlibrary.repo.mapper.CategoryMapper">
	<resultMap id="categoryResultMap" type="Category">
		<id property="id" column="ID"/>
		<result property="categoryName" column="CATEGORY_NAME"/>
		<result property="desc" column="DESC"/>
	</resultMap>
	
	<insert id="insertCategory" parameterType="Category" useGeneratedKeys="true" keyProperty="id" keyColumn="ID">
		INSERT INTO CATEGORY
		(
			ID
			,CATEGORY_NAME
			,`DESC`
		)
		VALUES(
			#{id}
			,#{categoryName}
			,#{desc}
		)
	</insert>
	
	<select id="selectCategory" parameterType="Long" resultMap="categoryResultMap">
		SELECT
			ID
			,CATEGORY_NAME
			,DESC
		FROM
			CATEGORY
		WHERE
			ID = #{id}
	</select>
	
	<select id="selectCategoryByCategoryName" parameterType="String" resultMap="categoryResultMap">
		SELECT
			ID
			,CATEGORY_NAME
			,`DESC`
		FROM
			CATEGORY
		WHERE
			CATEGORY_NAME = #{categoryName}
	</select>
	
	<select id="selectCategoriesBySearch" parameterType="CategorySearch" resultMap="categoryResultMap">
		SELECT 
			ID
			,CATEGORY_NAME
			,`DESC`
		FROM
			CATEGORY
	</select>
	
	<select id="selectCategoriesTotalCountBySearch" parameterType="CategorySearch" resultType="int">
		SELECT
			COUNT(1)
		FROM
			CATEGORY
	</select>
	
	<update id="updateCategory" parameterType="Category">
		UPDATE 
			CATEGORY
		SET
			CATEGORY_NAME = #{categoryName}
			,`DESC` = #{desc}
		WHERE

			ID = #{id}
	</update>
	
	<delete id="deleteCategory" parameterType="Long">
		DELETE
		FROM
			CATEGORY
		WHERE
			ID = #{id}
	</delete>
	
	<select id="countCategory" resultType="int">
		SELECT
			COUNT(*)
		FROM
		 	CATEGORY
	</select>

	<select id="selectCategories" resultMap="categoryResultMap">
		SELECT
			ID
			,CATEGORY_NAME
			,`DESC`
		FROM
			CATEGORY
	</select>
</mapper>